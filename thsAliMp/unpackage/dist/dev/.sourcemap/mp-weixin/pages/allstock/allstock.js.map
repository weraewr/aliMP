{"version":3,"sources":["uni-app:///main.js","webpack:////Users/yss-work/workPlace/前端代码/thsMp/thsMp/pages/allstock/allstock.vue?4f70","webpack:////Users/yss-work/workPlace/前端代码/thsMp/thsMp/pages/allstock/allstock.vue?e34e","webpack:////Users/yss-work/workPlace/前端代码/thsMp/thsMp/pages/allstock/allstock.vue?6733","webpack:////Users/yss-work/workPlace/前端代码/thsMp/thsMp/pages/allstock/allstock.vue?2510","uni-app:///pages/allstock/allstock.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,sG;AACAA,UAAU,CAACC,iBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACrH;AAC4D;AACL;;;AAGvD;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,kRAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAq1B,CAAgB,syBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;ACWz2B;AACA;AACA,oF;;;;;;;;;;eACA,EACA,IADA,kBACA,CACA,SACA,YADA,EAEA,YAFA,EAGA,iBAHA,EAGA;AACA,oBAJA,EAIA;AACA,qBALA,EAMA,oCANA,EAOA,WAPA,EAQA,aARA,EASA,sBATA;AAUA,aAVA;AAWA,2BAXA;AAYA,mCAZA;AAaA,yBAbA,EAaA;AACA,kBAdA;AAeA,iBAfA;AAgBA,eAhBA;AAiBA,kBAjBA,EAiBA;AACA,+CAlBA;AAmBA,iBAnBA,EAmBA;AACA,oBApBA,EAoBA;;AAEA,qBAtBA,EAsBA;AACA,qBAvBA,EAuBA;AACA,qBAxBA,EAwBA;;AAEA,wBA1BA,CA0BA;AA1BA;AA4BA,GA9BA;AA+BA,cA/BA,0BA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAbA;AAcA,GAlDA;AAmDA,mBAnDA,6BAmDA,OAnDA,EAmDA;AACA;AACA;AACA;AACA;AACA,wEADA;;AAGA;AACA,GA3DA;AA4DA,QA5DA,oBA4DA;AACA;AACA;AACA;AACA,2BADA;;AAGA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA;AACA;AACA;AACA,KATA,EASA,KATA;AAUA;AACA,mBADA;AAEA,wEAFA;AAGA,aAHA,qBAGA;AACA,OAJA;;AAMA,GAnFA;AAoFA,QApFA,oBAoFA;AACA;AACA;AACA;AACA;AACA,OAFA;AAGA;AACA,GA3FA;AA4FA,QA5FA,oBA4FA;AACA;AACA,GA9FA;AA+FA,WA/FA,uBA+FA;AACA;AACA,GAjGA;AAkGA;AACA,cADA,sBACA,IADA,EACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBADA;AAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA,KAjBA;AAkBA,YAlBA,oBAkBA,IAlBA,EAkBA,IAlBA,EAkBA;AACA;AACA;AACA,uCADA;;AAGA;;AAEA;AACA;AACA,OAFA;AAGA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA,4BADA;AAEA;AACA;AACA,KAtCA;AAuCA,cAvCA,sBAuCA,IAvCA,EAuCA,OAvCA,EAuCA;AACA;AACA;AACA,KA1CA;AA2CA,WA3CA,mBA2CA,IA3CA,EA2CA,IA3CA,EA2CA;AACA;AACA;AACA;AACA;AACA,sBADA;;AAGA;AACA;AACA,6CADA;AAEA,sBAFA;AAGA,kBAHA;AAIA;AACA,oBADA,CACA;AADA,SAJA;AAOA,eAPA,mBAOA,GAPA,EAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCADA;AAEA,eAHA,MAGA;AACA;AACA,sBADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAFA,MAEA;AACA;AACA;AACA,eARA,MAQA;AACA;AACA;AACA;AACA;AACA,aAxBA,MAwBA;AACA;AACA;AACA,WA9BA,MA8BA;AACA;AACA;AACA;AACA;AACA,qCADA;AAEA,4BAFA;;AAIA;AACA;AACA,SAhDA;AAiDA,YAjDA,gBAiDA,GAjDA,EAiDA;AACA;AACA;AACA;AACA;AACA;AACA,mCADA;AAEA,0BAFA;;AAIA;AACA,SA3DA;;AA6DA,KAhHA;AAiHA,QAjHA,gBAiHA,IAjHA,EAiHA;AACA;AACA,iEADA;;AAGA,KArHA,EAlGA,E","file":"pages/allstock/allstock.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/allstock/allstock.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./allstock.vue?vue&type=template&id=6fec8e26&\"\nvar renderjs\nimport script from \"./allstock.vue?vue&type=script&lang=js&\"\nexport * from \"./allstock.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/allstock/allstock.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./allstock.vue?vue&type=template&id=6fec8e26&\"","var components = {\n  thsUnifyList: function() {\n    return import(\n      /* webpackChunkName: \"components/ths-unify-list/ths-unify-list\" */ \"@/components/ths-unify-list/ths-unify-list.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./allstock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./allstock.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<ths-unify-list class=\"ths-list\" :titShow=\"true\" :titText=\"titText\" :optionText=\"optionText\" :listActive=\"listActive\"\r\n\t\t @changeList=\"changeList\" :infoTit=\"infoTit\" :load=\"load\" :colorKey=\"colorKey\" :listData=\"listData\" :titArr=\"titArr\"\r\n\t\t :titDataType=\"titDataType\" @sortData=\"sortData\" :inverted=\"inverted\" :isFixed=\"isTop\" :fixedTop=\"fixedTop\"\r\n\t\t :fixedType=\"1\" @jump=\"jump\" :showShorBtn=\"showShorBtn\">\r\n\t\t</ths-unify-list>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport qsort from '../../static/lib/sort.js'\r\n\timport checkData from '../../static/lib/checkData.js'\r\n\timport api from '../../http/api.js'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisTop: false,\r\n\t\t\t\tfixedTop: '',\r\n\t\t\t\tlistScrollTop: '', //列表距离上顶部的距离\r\n\t\t\t\tlistNowTop: '', //列表目前距离上顶部的距离\r\n\t\t\t\tinverted: false,\r\n\t\t\t\toptionText: ['行业板块', '概念板块', '地域板块'],\r\n\t\t\t\ttitText: '',\r\n\t\t\t\tlistActive: 1,\r\n\t\t\t\tinfoTit: ['涨跌幅', '涨速'],\r\n\t\t\t\tload: 2,\r\n\t\t\t\tcolorKey: 'gainSpeed',\r\n\t\t\t\ttitArr: ['gain', 'gainSpeed'],\r\n\t\t\t\ttitDataType: [1, 1], //配合titArr，表示数据是百分数，还是普通数\r\n\t\t\t\tindustry: [],\r\n\t\t\t\tconcept: [],\r\n\t\t\t\treign: [],\r\n\t\t\t\tlistData: [], //显示的数据\r\n\t\t\t\tlistArr: ['industry', 'concept', 'reign'],\r\n\t\t\t\tnowList: '', //记录当前显示数据\r\n\t\t\t\thealthData: {}, //健康数据对象\r\n\r\n\t\t\t\tdataTimer: null, //更新数据定时器\r\n\t\t\t\tisShowNow: true, //是否在浏览当前页\r\n\t\t\t\tisUpdata: false, //是否立即更新数据\r\n\t\t\t\t\r\n\t\t\t\tshowShorBtn: false,//排序按钮是否隐藏\r\n\t\t\t};\r\n\t\t},\r\n\t\tonPageScroll() {\r\n\t\t\tlet that = this;\r\n\t\t\tconst query = uni.createSelectorQuery()\r\n\t\t\tquery.select('.ths-list').boundingClientRect()\r\n\t\t\tquery.selectViewport().scrollOffset()\r\n\t\t\tquery.exec(function(res) {\r\n\t\t\t\tif (res[0].top <= 0) {\r\n\t\t\t\t\tthat.isTop = true;\r\n\t\t\t\t\tthat.fixedTop = '0px';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (that.isTop) {\r\n\t\t\t\t\t\tthat.isTop = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!that.listScrollTop) {\r\n\t\t\t\t\tthat.listScrollTop = res[1].scrollTop + res[0].top;\r\n\t\t\t\t}\r\n\t\t\t\tthat.listNowTop = res[0].top;\r\n\t\t\t})\r\n\t\t},\r\n\t\tonShareAppMessage(options) {\r\n\t\t\tlet that = this;\r\n\t\t\t// 设置菜单中的转发按钮触发转发事件时的转发内容\r\n\t\t\tlet url = '/pages/allstock/allstock'\r\n\t\t\tlet shareObj = {\r\n\t\t\t\tpath: `/pages/index/index?url=${url}&shareType=allstock`\r\n\t\t\t};\r\n\t\t\treturn shareObj;\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t//加载数据\r\n\t\t\tthis.getData('industry', 1);\r\n\t\t\twx.showShareMenu({\r\n\t\t\t\twithShareTicket: true\r\n\t\t\t})\r\n\t\t\t//开启定时器\r\n\t\t\tthis.dataTimer = setInterval(() => {\r\n\t\t\t\tif (this.isShowNow) {\r\n\t\t\t\t\tthis.listArr.forEach((item) => {\r\n\t\t\t\t\t\tthis.getData(item);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.isUpdata && !this.isShowNow) {\r\n\t\t\t\t\tthis.isUpdata = true;\r\n\t\t\t\t}\r\n\t\t\t}, 30000)\r\n\t\t\tuni.loadFontFace({\r\n\t\t\t\tfamily: 'THS',\r\n\t\t\t\tsource: 'url(\"https://i.thsi.cn/m/fonts/THSMoneyfont-Medium.ttf\")',\r\n\t\t\t\tsuccess() {\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.isShowNow = true;\r\n\t\t\tif (this.isUpdata) {\r\n\t\t\t\tthis.listArr.forEach((item) => {\r\n\t\t\t\t\tthis.getData(item);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tonHide() {\r\n\t\t\tthis.isShowNow = false;\r\n\t\t},\r\n\t\tdestroyed() {\r\n\t\t\tthis.isShowNow = false;\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tchangeList(type) {\r\n\t\t\t\tthis.listActive = type;\r\n\t\t\t\t//每次切换列表数据时，重置排序项为第一项\r\n\t\t\t\tlet data = this[this.listArr[type - 1]];\r\n\t\t\t\tlet healthData = checkData(data, this.titArr);\r\n\r\n\t\t\t\t//首先判断数据有没有没有，没有就向后端请求\r\n\t\t\t\tthis.inverted = false;\r\n\t\t\t\tlet listData = qsort(healthData.dataArr, 0, healthData.dataArr.length, this.titArr[0], this.inverted).concat(\r\n\t\t\t\t\thealthData.errArr);\r\n\t\t\t\tif (data.length == 0) {\r\n\t\t\t\t\tthis.getData(this.listArr[type - 1], 1)\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// this.listData = data;\r\n\t\t\t\t\tthis.listData = listData;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsortData(type, isUp) {\r\n\t\t\t\tif (this.listNowTop < 0) {\r\n\t\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\t\tscrollTop: this.listScrollTop\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.listData.sort(function() {\r\n\t\t\t\t\treturn .5 - Math.random();\r\n\t\t\t\t});\r\n\t\t\t\tthis.healthData = checkData(this.listData, this.titArr)\r\n\t\t\t\tif(this.healthData.dataArr.length == 0) {\r\n\t\t\t\t\tthis.showShorBtn = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showShorBtn = false;\r\n\t\t\t\t}\r\n\t\t\t\tthis.listData = qsort(this.healthData.dataArr, 0, this.healthData.dataArr.length, this.titArr[type - 1], !isUp).concat(\r\n\t\t\t\t\tthis.healthData.errArr);\r\n\t\t\t\tthis.inverted = !isUp;\r\n\t\t\t\tthis.nowList = this.titArr[type - 1];\r\n\t\t\t},\r\n\t\t\tformatData(data, datName) {\r\n\t\t\t\tthat.hyData = JSON.parse(data);\r\n\t\t\t\tthat.listData = that.hyData;\r\n\t\t\t},\r\n\t\t\tgetData(name, type) {\r\n\t\t\t\t//获取对应板块数据\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (type == 1) {\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: api.searchBlockInfoList,\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\ttime: 3000,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\ttype: name //默认先获取行业数据\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tif (res.data.status_code == 0) {\r\n\t\t\t\t\t\t\t//请求成功\r\n\t\t\t\t\t\t\tlet resData = JSON.parse(res.data.result.blockInfoList)\r\n\t\t\t\t\t\t\tif (resData.length > 0) {\r\n\t\t\t\t\t\t\t\t//得到健康数据\r\n\t\t\t\t\t\t\t\tthat.healthData = checkData(resData, that.titArr)\r\n\t\t\t\t\t\t\t\t//赋值 排好序的值 + 异常数据（比如停牌）\r\n\t\t\t\t\t\t\t\tif (that.nowList) {\r\n\t\t\t\t\t\t\t\t\tthat[name] = qsort(that.healthData.dataArr, 0, that.healthData.dataArr.length, that.nowList, that.inverted).concat(\r\n\t\t\t\t\t\t\t\t\t\tthat.healthData.errArr);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthat[name] = qsort(that.healthData.dataArr, 0, that.healthData.dataArr.length, that.titArr[0]).concat(that.healthData\r\n\t\t\t\t\t\t\t\t\t\t.errArr);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (type == 1) {\r\n\t\t\t\t\t\t\t\t\tthat.listData = that[name];\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\tif(that.healthData.dataArr.length == 0) {\r\n\t\t\t\t\t\t\t\t\t\tthat.showShorBtn = true;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tthat.showShorBtn = false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthat.listData = that[that.listArr[that.listActive - 1]];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//加载顺利，没有更多数据了\r\n\t\t\t\t\t\t\t\tthat.load = 3;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthat.load = 4;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.load = 4;\r\n\t\t\t\t\t\t\tif (type == 1) {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '数据获取失败，请稍候再试',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\tthat.load = 4;\r\n\t\t\t\t\t\tif (type == 1) {\r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '数据获取失败，请稍候再试',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tjump(data) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `../blockdetail/blockdetail?code=${data.code}`\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\t\r\n</style>\r\n"],"sourceRoot":""}