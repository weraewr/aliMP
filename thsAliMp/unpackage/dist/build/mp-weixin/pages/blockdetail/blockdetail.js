(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/blockdetail/blockdetail"],{"33b6":function(t,e,a){},"73b6":function(t,e,a){"use strict";a.r(e);var i=a("ecec"),o=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=o.a},"95d5":function(t,e,a){"use strict";var i={"ths-unify-list":function(){return Promise.all([a.e("common/vendor"),a.e("components/ths-unify-list/ths-unify-list")]).then(a.bind(null,"efae"))}},o=function(){var t=this,e=t.$createElement,a=(t._self._c,t._f("price")(t.newPrice)),i=t._f("formatPrecent")(t.gain&&t.gain),o=t.__map(t.longArr,(function(e,a){var i=t._f("defaultValue")(e.name),o=t._f("price")(e.newPrice),n=t._f("formatPrecent")(e.gain);return{$orig:t.__get_orig(e),f2:i,f3:o,f4:n}}));t.$mp.data=Object.assign({},{$root:{f0:a,f1:i,l0:o}})},n=[];a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}))},a0ed:function(t,e,a){"use strict";(function(t){a("efb7"),a("921b");i(a("66fd"));var e=i(a("ccd6"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},cb1f:function(t,e,a){"use strict";var i=a("33b6"),o=a.n(i);o.a},ccd6:function(t,e,a){"use strict";a.r(e);var i=a("95d5"),o=a("73b6");for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);a("cb1f");var r,s=a("f0c5"),c=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"3231f2e9",null,!1,i["a"],r);e["default"]=c.exports},ecec:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=c(a("6e5f")),o=c(a("b6aa")),n=c(a("6ff3")),r=c(a("9245")),s=a("2f62");function c(t){return t&&t.__esModule?t:{default:t}}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){f(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function f(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var u={onPageScroll:function(){var e=this,a=t.createSelectorQuery();a.select(".ths-list").boundingClientRect(),a.selectViewport().scrollOffset(),a.exec((function(t){t[0].top<=0?(e.isTop=!0,e.fixedTop="0px"):e.isTop&&(e.isTop=!1),e.listScrollTop||(e.listScrollTop=t[1].scrollTop+t[0].top),e.listNowTop=t[0].top}))},data:function(){return{name:"--",code:"--",newPrice:"",gain:"",longArr:[],showText:!1,isTop:!1,fixedTop:"",intro:"",listScrollTop:"",listNowTop:"",inverted:!1,titText:"成分股",listActive:1,infoTit:["最新价","涨跌幅"],load:2,colorKey:"gain",titArr:["newPrice","gain"],titDataType:[0,1],listData:[],sharesInfoList:[],sortTypeStatus:"2",nowKey:"",healthData:{},dataTimer:null,isShowNow:!0,isUpdata:!1}},onLoad:function(e){var a=this,i=e.code;this.getBlockData(i),wx.showShareMenu({withShareTicket:!0}),this.dataTimer=setInterval((function(){a.isShowNow&&a.getBlockData(a.code,1),a.isUpdata||a.isShowNow||(a.isUpdata=!0)}),3e4),t.loadFontFace({family:"THS",source:'url("https://i.thsi.cn/m/fonts/THSMoneyfont-Medium.ttf")',success:function(){}})},onShareAppMessage:function(t){var e="/pages/blockdetail/blockdetail",a={path:"/pages/index/index?url=".concat(e,"&code=").concat(this.code,"&shareType=blockdetail")};return a},onShow:function(){var t=this;this.isShowNow=!0,this.isUpdata&&this.listArr.forEach((function(e){t.getBlockData(t.code,1)}))},onHide:function(){this.isShowNow=!1},destroyed:function(){this.isShowNow=!1},computed:h({},(0,s.mapState)(["oldMarketMap","newMarketMap","loginInfo"])),methods:{changeTextState:function(){this.showText=!this.showText},changeList:function(t){this.listActive=t;var e=this[this.listArr[t-1]];this.listData=(0,o.default)(e,0,e.length,this.titArr[0])},sortData:function(e,a){this.listNowTop<0&&t.pageScrollTo({scrollTop:this.listScrollTop}),this.listData.sort((function(){return.5-Math.random()})),this.healthData=(0,n.default)(this.listData,this.titArr),this.listData=(0,o.default)(this.healthData.dataArr,0,this.healthData.dataArr.length,this.titArr[e-1],!a).concat(this.healthData.errArr),this.inverted=!a,this.nowKey=this.titArr[e-1]},getBlockData:function(e,a){a||t.showLoading({title:"正在加载"});var i=this;t.request({url:r.default.searchBlockInfo,method:"POST",time:3e3,data:{code:e},success:function(e){!a&&t.hideLoading(),0==e.data.status_code?(i.formatData(e.data.result),a||(i.load=3)):(a||t.showToast({title:"数据获取失败，请稍候再试",icon:"none"}),a||(i.load=4))},fail:function(e){console.log(e),!a&&t.hideLoading(),a||(t.showToast({title:"数据获取失败，请稍候再试",icon:"none"}),i.load=4)}})},formatData:function(t){this.name=t.blockInfo.name,this.code=t.blockInfo.code,this.newPrice=t.blockInfo.newPrice,this.gain=t.blockInfo.gain,t.bellwetherStockList&&(this.longArr=t.bellwetherStockList.slice(0,3)),t.sharesInfoList&&(this.sharesInfoList=t.sharesInfoList,this.sharesInfoList&&this.sharesInfoList.length>0&&(this.healthData=(0,n.default)(this.sharesInfoList,this.titArr),this.nowKey?this.listData=(0,o.default)(this.healthData.dataArr,0,this.healthData.dataArr.length,this.nowKey,this.inverted).concat(this.healthData.errArr):this.listData=(0,o.default)(this.healthData.dataArr,0,this.healthData.dataArr.length,this.titArr[1]).concat(this.healthData.errArr)))},jump:function(e){var a;a="{}"!=JSON.stringify(this.newMarketMap)?i.default.getMarkAndCode(e.id,e.code,this.newMarketMap):i.default.getMarkAndCode(e.id,e.code,this.oldMarketMap),a&&e.name&&t.navigateTo({url:"../hq/hq?marketAndCode=".concat(a,"&name=").concat(e.name)})}}};e.default=u}).call(this,a("543d")["default"])}},[["a0ed","common/runtime","common/vendor"]]]);